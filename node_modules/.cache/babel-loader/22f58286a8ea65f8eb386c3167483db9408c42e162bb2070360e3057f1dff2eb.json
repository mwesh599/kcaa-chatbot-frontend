{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import'./ChatWidget.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ChatWidget(){const[isOpen,setIsOpen]=useState(false);const[messages,setMessages]=useState([]);const[input,setInput]=useState('');const toggleChat=()=>setIsOpen(!isOpen);const sendMessage=async()=>{if(!input.trim())return;const userMsg={text:input,from:'user'};setMessages(prev=>[...prev,userMsg]);setInput('');try{const response=await axios.post('https://railway-up-production-aca8.up.railway.app/api/chat',{message:input});const botReply=response.data.reply||'No response from server.';setMessages(prev=>[...prev,{text:botReply,from:'bot'}]);}catch(error){console.error('Error:',error);setMessages(prev=>[...prev,{text:'‚ö†Ô∏è Error reaching chatbot server.',from:'bot'}]);}};const handleKeyPress=e=>{if(e.key==='Enter')sendMessage();};return/*#__PURE__*/_jsxs(\"div\",{className:\"chat-widget-container\",children:[isOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"chat-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chat-header\",children:\"Chat with KCAA\"}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-body\",children:messages.map((msg,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"chat-message \".concat(msg.from),children:msg.text},index))}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-footer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:input,onChange:e=>setInput(e.target.value),onKeyPress:handleKeyPress,placeholder:\"Type a message...\"}),/*#__PURE__*/_jsx(\"button\",{onClick:sendMessage,children:\"\\uD83D\\uDCE4\"})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"chat-toggle-btn\",onClick:toggleChat,children:isOpen?'‚úñÔ∏è':'üí¨'})]});}export default ChatWidget;","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","ChatWidget","isOpen","setIsOpen","messages","setMessages","input","setInput","toggleChat","sendMessage","trim","userMsg","text","from","prev","response","post","message","botReply","data","reply","error","console","handleKeyPress","e","key","className","children","map","msg","index","concat","type","value","onChange","target","onKeyPress","placeholder","onClick"],"sources":["C:/Users/mwesh845/react-chat-widget/src/ChatWidget.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport './ChatWidget.css';\r\n\r\nfunction ChatWidget() {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [messages, setMessages] = useState([]);\r\n  const [input, setInput] = useState('');\r\n\r\n  const toggleChat = () => setIsOpen(!isOpen);\r\n\r\n  const sendMessage = async () => {\r\n    if (!input.trim()) return;\r\n\r\n    const userMsg = { text: input, from: 'user' };\r\n    setMessages((prev) => [...prev, userMsg]);\r\n    setInput('');\r\n\r\n    try {\r\n      const response = await axios.post(\r\n        'https://railway-up-production-aca8.up.railway.app/api/chat',\r\n        { message: input }\r\n      );\r\n\r\n      const botReply = response.data.reply || 'No response from server.';\r\n      setMessages((prev) => [...prev, { text: botReply, from: 'bot' }]);\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n      setMessages((prev) => [\r\n        ...prev,\r\n        { text: '‚ö†Ô∏è Error reaching chatbot server.', from: 'bot' },\r\n      ]);\r\n    }\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === 'Enter') sendMessage();\r\n  };\r\n\r\n  return (\r\n    <div className=\"chat-widget-container\">\r\n      {isOpen && (\r\n        <div className=\"chat-box\">\r\n          <div className=\"chat-header\">Chat with KCAA</div>\r\n          <div className=\"chat-body\">\r\n            {messages.map((msg, index) => (\r\n              <div key={index} className={`chat-message ${msg.from}`}>\r\n                {msg.text}\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <div className=\"chat-footer\">\r\n            <input\r\n              type=\"text\"\r\n              value={input}\r\n              onChange={(e) => setInput(e.target.value)}\r\n              onKeyPress={handleKeyPress}\r\n              placeholder=\"Type a message...\"\r\n            />\r\n            <button onClick={sendMessage}>üì§</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n      <button className=\"chat-toggle-btn\" onClick={toggleChat}>\r\n        {isOpen ? '‚úñÔ∏è' : 'üí¨'}\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChatWidget;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}